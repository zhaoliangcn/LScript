# **2019年8月24日**

第一个脚本文件

```c++
#scp
#scpeng
define:function,main
	("hello lscript!").show()
end
```

```c++
#scp
定义:函数,主函数
	("你好，L脚本语言").显示()
结束
```

# **2019年9月25日**

## 整数

基本数据类型中的整数是数学运算中的基本单元，整数的取值范围为 [-2147483648,2147483647]，对应于C/C++语言中的int类型，即32位整数。

区别于C/C++语言，这里的整数是对象。C/C++ Java编程语言的整数类型是基本数据类型，而不是对象，JavaScript Ruby 中的整数是对象。对于基本数据类型整数，它只是保存于内存中的32字节的一段数据。而整数对象不仅包含了它所存储的数值，还包含了对这个数值进行操作和访问的方法。

比如我们想要在屏幕控制台输出一个整数x的值，C语言的代码是这样

```c
int x = 100;

printf("%d",x);
```

C++的代码是这样

```c++
int x = 100;

std::cout<<x<<std::endl;
```

Java的代码是这样

```java
int x = 100;

System.out.println("%d",x);
```

而L脚本语言的代码是这样

```c++
define:int,x,100

x.show()
```

可以看到，对于基本数据类型整数的显示输出，需要调用外部函数，而对于整数对象 ，只需要调用整数对象的成员方法

说明站在使用的角度，整数对象使用更加方便和安全。

然而，正因为对象不仅包含数据 还包含对数据操作的方法函数，所以 对象会占用更多的存储空间，对象的创建，销毁都会增加运行时间。不过这都是编程语言设计时所 权衡的问题，到底是要紧凑高效还是简单易用，这里面需要取得一个平衡。现在的计算机运算速度都比较高内存空间也比较大，对象所占内存空间基本上是微不足道的，对象所带来的性能损失也可以通过执行引擎的优化来补偿。

L脚本语言中，就是通过对象缓存来减少对象创建时的内存分配，和对象销毁时的内存释放。

下面我们看看例子程序

```c++
#scp
#scpeng
define:int,x,100
define:int,y,200
define:int,f
f=x+y
f.show()

```

```c++
#scp
定义:整数,x,100
定义:整数,y,200
定义:整数,f
f=x+y
f.显示()

```

在这段脚本中，我们 定义了三个整数对象,x,y,f，x在定义时初始化为100，y在定义时初始化为200,f在定义时默认初始化为0，之后我们将x和y之间的加法运算结果赋值给f，然后在控制台窗口中将f的值显示出来 

# **2019年9月26日**

## 整数

在任何一种编程语言中，整数都是最基本的类型。计算机程序可以用来表示基础的数学运算，也可以描述复杂的业务逻辑，然而这一切最终都会转换成为基本的CPU指令序列，这些基本的指令序列除去IO相关的指令，就是最基本的数学运算。因此计算机程序本质上是数学运算的高级抽象。

无论编程语言多么高级，要想实现完整的程序功能，都少不了数值运算。所以学习任何一门编程语言，都需要掌握基本的整数 浮点数 的运算。

C/C++语言中包含 整数、无符号整数、浮点数、双精度浮点数等数据类型

Java Python 语言中都包含对应的数据类型

Lua语言中仅包含双精度浮点数

L脚本语言中包含 整数 浮点数 大整数 这几种基本的数值类型，并且，它们都是对象。整数对应于C/C++语言中的32位整数 浮点数对应于C/C++语言中的双精度浮点数 大整数对应于C/C++语言中的64位整数。

不同的数据类型适用的场景不同，这在C/C++这类比较接近机器语言的编程语言中表现的很明显。在实现程序逻辑时，需要根据数值范围、存储空间要求选择适当的数据类型。而在Java Python等编程语言中，大多数时间都不需要考虑存储空间的问题和数值范围的问题，不过这也不是绝对的，在进行金融计算的时候，就需要仔细考虑数值范围计算静精度的问题，慎重选择数据类型。

## 加减乘除四则运算、取模

我们通过编程来实现数学运算到计算机程序的映射。

来看一个数学公式

z = x + y 

这个简单的数学公式通过几个符号来描述数值之间的关系：z 等于 x + y

而在程序设计中

z = x + y 

是一行程序代码，它描述了需要计算机执行的逻辑：将变量x与变量y的和赋值给变量z

+表示执行加法运算

=表示执行变量赋值

这应该很好理解，虽然这一行程序看起来和数学公式一模一样，但它们是不一样的，数学公式表示了变量之间的数学关系，它是静态的，而程序代码在描述即将由计算机执行的运算，它不仅能表示变量之间的关系，还是计算机运行时流程的描述。

对于L脚本语言中的整数，用 + - * / 表示执行加法、减法、乘法、除法运算，用%表示取模运算

参考下面的脚本

```c++
#scp
#scpeng
define:int,x,100
define:int,y,200
define:int,z
z=x+y
z.show()
z=y-x
z.show()
z=x*y
z.show()
z=y/x
z.show()
z=y%x
z.show()
```

# **2019年10月2日**

## 赋值

```c
z=x+y
z=y-x
z=x*y
z=y/x
z=y%x
y+=x
y-=x
y*=x
y/=x
y%=x
```

程序设计中，对变量各种运算只是过程，运算之后还需要修改变量的值，用变量的值来表征程序逻辑的状态或结果。修改变量的值就是通过赋值语句，我们将=叫做赋值运算符，把赋值也认为是一种运算。

y+=x 和 y=x+y 是等价的，+=表示先执行加法，再执行赋值，这是一种缩写形式，这样缩写的形式能够表意更清晰，也降低了拼写错误的发生概率。

y-=x  和 y=y-x 是等价的

y*=x 和 y=x**y 是等价的

y/=x 和 y =y/x 是等价的

y%=x 和 y=y%x 是等价的

在表达式中，我们把x y z 叫做操作数，运算符左边的叫做左操作数，运算符右边的叫做右操作数

## 左值和右值

这里需要明确一个概念

赋值运算符左边的就叫左值，右边的就叫右值

左值是可以被赋值的，右值不可以

所以左操作数不一定是左值

例如

3+x

3是左操作数 x 是右操作数

x=3

x是左操作数也是左值，3是右操作数也是右值

但是不能写~~3=x~~,因为3是常量，是右值，不能够被赋值

对于z=x+y，实际上我们需要把它看作两部分，或者说是两步操作

首先是 x + y ，进行加法运算，编译器或者解释器会将x + y 的运算结果保存下来，我们暂且认为保存为 temp，这时候x是左操作数,y是右操作数

然后是 z = temp ，进行赋值运算 这时候 z的值就是x + y 的运算结果，这时候z是左操作数也是左值,temp是右操作数也是右值



# 2019年10月8日

## 作为对象的整数

我们一直强调L脚本语言中整数是对象，整数对象不仅能够作为操作数参与运算，它自身还包含可调用的方法（成员函数）。

下面逐一列除整数对象支持的方法

在控制台显示整数的值

显示()

show()

返回一个字符串对象，这个字符串对象的值是整数对象的类型名称

获取("类型")

get("type")

返回一个字符串对象，其值为整数对象的值转换为字符串

转换("字符串")

transform("string")

返回一个整数对象，其值为整数对象的值的平方

平方()

square()

返回一个整数对象，其值为整数对象的值的平方根

平方根()

sqrt()

返回一个整数对象，其值为整数对象的值的立方

立方()

cubic()

返回一个整数对象，其值为整数对象的值的立方根

立方根()

cuberoot()

返回一个整数对象，其值为整数对象的值的绝对值

绝对值()

abs()

返回一个整数对象，其值为整数对象的值的反余弦函数值

反余弦()

acos()

返回一个整数对象，其值为整数对象的值的余弦函数值

余弦()

cos()

返回一个整数对象，其值为整数对象的值的反正弦函数值

反正弦()

asin()

返回一个整数对象，其值为整数对象的值的正弦函数值

正弦()

sin()

返回一个整数对象，其值为整数对象的值的反正切函数值

反正切()

atan()

返回一个整数对象，其值为整数对象的值的正切函数值

正切()

tan()



# 2020年1月26日

## 位运算

我们知道在计算机中是以二进制方式处理数据的，位运算将整数以二进制的形式进行处理，针对的是每一个比特位。

位运算包括按位左移、按位右移、按位与、按位或、按位异或、按位取反 操作

L脚本语言中的位运算与C / C++ 中的位运算一一对应

按位左移 << 

按位右移 >>

按位与 &

按位或 |

按位异或 ^

按位取反 ~

参考以下脚本代码

```c++
#scp
#scpeng
define:function,main
	define:myclass,cl
        cl.init(1,1,1,1)
        cl.version.show()
        cl.ver.show()
        cl.major.show()
        cl.minor.show()
        cl.sub.show()
        cl.fix.show()
        
        define:string,s
        wait:userinput,s
end
define:class,myclass
	public:
	define:function,init,a,b,c,d
		define:int,mask,15
		//位运算例子
		//组合版本号
		ver=(a<<12)|(b<<8)|(c<<4)|d
                //提取版本号
		major=((mask<<12)&ver)>>12
		minor=((mask<<8)&ver)>>8
		sub=((mask<<4)&ver)>>4
		fix=mask&ver
	end

	define:string,version,"1.1.1.1"
	define:int,ver
	define:int,major,0
	define:int,minor,0
	define:int,sub,0
	define:int,fix,0
end

```



# 2020年1月29日

## 位运算并赋值

为了简化代码，有进行数值运算并赋值的赋值运算符，也有进行位运算并赋值的赋值运算符

罗列如下

```c++
数值运算并赋值
    
+=	加法运算并赋值
    
-=	减法运算并赋值
    
*=	乘法运算并赋值
   
/=	除法运算并赋值
    
%=	取模运算并赋值
```



```c++
位运算并赋值
    
&=	按位与并赋值

|=	按位或并赋值

~=	按位取反并赋值

^=	按位异或并赋值

<<=	按位左移并赋值

>>=	按位右移并赋值
```

简化的赋值运算符不仅可以使代码更加精简，同时也更加高效，因为解释器可以实现"原地操作"而不需要在赋值运算时生成临时对象。

## 整数总结

​	在脚本语言中，整数被实现为对象，而在C / C++ 和汇编语言中，程序编译后整数可以是堆或栈中的一块内存，还可以是某个寄存器中的值，因而通过这些编程语言编译出的代码进行整数运算的时候效率非常高，存储占用的空间也很小很紧凑。在面向对象的脚本语言中，整数对象不仅包含其整数值，还包含相关属性信息、成员函数，因此整数对象一般都是一块堆内存，相对来说占用较多的空间，且由于访问整数对象需要通过对象地址再间接访问整数对象的值，所以效率一定没有C / C++ 和汇编语言编译生成的代码效率高。这说明越高的抽象级别，占用的资源越多，效率越低。好在现在的计算机访问内存和进行运算的速度越来越快，这些效率的损失相对于开发代码耗费的时间损失来说就不算什么了。对于业务逻辑的实现来说，尽量使用Java Python JavaScript等高级语言能够明显的提高开发速度和降低调试难度，所以这些场景下使用高级语言开发更合适。但是对于密码学算法、压缩算法、底层网络协议栈处理，密集数学运算这些对性能要求很高的场景下，还是使用C / C++ 和汇编语言更加合适。现在非常流行机器学习、深度学习，这些开发的前端业务逻辑的实现多是采用Java /Python ，而底层数学运算、矩阵运算相关的部分仍需要通过高效的C++代码实现。对于操作系统内核，设备驱动程序的开发来说，因为脚本语言不能生成二进制代码，还需要脚本解释器或字节码执行引擎才能够运行，脚本解释器或字节码执行引擎本身就是二进制程序，需要在操作系统环境中运行，所以脚本语言是不能够用来进行操作系统、设备驱动程序开发的。

​	脚本语言适合做快速原型开发，算法逻辑验证，系统运维开发，或者作为底层算法库的高层封装，或者作为其他编程语言的粘合剂，或者作为其他编程语言的扩展模块。



# 2020年1月30日

## 大整数，浮点数

L脚本语言中大整数对应C/C++中的64位整数，取值范围为 [-9,223,372,036,854,775,808,+9,223,372,036,854,775,807] 。浮点数对应C/C++中的双精度浮点数，取值范围为[-1.79769313486232E308,1.79769313486232E308]。

所有适用于整数的运算符，赋值预算符，内置成员函数都适用于大整数。除位运算之外所有适用于整数的运算符都适用于浮点数。